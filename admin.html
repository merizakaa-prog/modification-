<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>

<style>
body{font-family:tahoma;background:#f3f3f3;padding:20px}
.card{background:#fff;padding:15px;margin-bottom:15px;border-radius:10px}
input{width:100%;padding:8px;margin:6px 0}
img{width:80px;height:80px;border-radius:50%;border:2px solid #8b0000;cursor:pointer}
button{width:100%;padding:10px;background:#8b0000;color:#fff;border:none;border-radius:6px}
</style>
</head>
<body>

<h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
<div id="status"></div>
<div id="panel"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”´ Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© */
const firebaseConfig = {
  apiKey: "Ø¶Ø¹_Ù‡Ù†Ø§",
  authDomain: "Ø¶Ø¹_Ù‡Ù†Ø§",
  projectId: "Ø¶Ø¹_Ù‡Ù†Ø§"
};

const status = document.getElementById("status");
status.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...";

try {
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const snapshot = await getDocs(collection(db, "dishes"));

  if (snapshot.empty) {
    status.innerHTML = "âš  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø·Ø¨Ø§Ù‚ Ø¯Ø§Ø®Ù„ Collection dishes";
  } else {
    status.innerHTML = "âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚";
  }

  snapshot.forEach(docSnap => {
    const d = docSnap.data();

    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");
    img.src = d.image;

    const name = document.createElement("input");
    name.value = d.name;

    const price = document.createElement("input");
    price.type = "number";
    price.value = d.price;

    const btn = document.createElement("button");
    btn.textContent = "Ø­ÙØ¸";
    btn.onclick = async () => {
      await updateDoc(doc(db,"dishes",docSnap.id),{
        name:name.value,
        price:Number(price.value)
      });
      alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ”");
    };

    card.append(img,name,price,btn);
    panel.appendChild(card);
  });

} catch (e) {
  status.innerHTML = "âŒ Ø®Ø·Ø£: " + e.message;
}
</script>

</body>
</html>
