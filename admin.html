<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚</title>

<style>
body{
  font-family:tahoma;
  background:#f3f3f3;
  padding:20px;
}
h2{text-align:center}
.card{
  background:#fff;
  padding:15px;
  margin-bottom:15px;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.15)
}
input, textarea{
  width:100%;
  padding:8px;
  margin:6px 0;
  font-family:tahoma
}
img{
  width:90px;
  height:90px;
  border-radius:50%;
  border:3px solid #8b0000;
  display:block;
  margin:10px auto;
}
button{
  width:100%;
  padding:10px;
  background:#8b0000;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:15px;
  cursor:pointer
}
</style>
</head>

<body>

<h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
<div id="panel"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  doc,
  updateDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”´ Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "restaurant-e323a.firebaseapp.com",
  projectId: "restaurant-e323a",
  storageBucket: "restaurant-e323a.appspot.com",
  messagingSenderId: "309092455734",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const panel = document.getElementById("panel");

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ */
const querySnapshot = await getDocs(collection(db, "dishes"));

querySnapshot.forEach(docSnap => {
  const d = docSnap.data();
  const id = docSnap.id;

  const card = document.createElement("div");
  card.className = "card";

  /* ØµÙˆØ±Ø© */
  const img = document.createElement("img");
  img.src = d.image || "";

  const imageInput = document.createElement("input");
  imageInput.placeholder = "Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©";
  imageInput.value = d.image || "";
  imageInput.oninput = () => img.src = imageInput.value;

  /* Ø§Ø³Ù… */
  const name = document.createElement("input");
  name.placeholder = "Ø§Ø³Ù… Ø§Ù„Ø·Ø¨Ù‚";
  name.value = d.name || "";

  /* Ø§Ù„Ø³Ø¹Ø± */
  const price = document.createElement("input");
  price.type = "number";
  price.placeholder = "Ø§Ù„Ø³Ø¹Ø±";
  price.value = d.price || 0;

  /* ÙÙŠØ¯ÙŠÙˆ */
  const video = document.createElement("input");
  video.placeholder = "Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ";
  video.value = d.video || "";

  /* Ù…ÙƒÙˆÙ†Ø§Øª */
  const ing = document.createElement("textarea");
  ing.placeholder = "Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª";
  ing.value = d.ingredients || "";

  /* ÙÙˆØ§Ø¦Ø¯ */
  const nut = document.createElement("textarea");
  nut.placeholder = "Ø§Ù„ÙÙˆØ§Ø¦Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©";
  nut.value = d.nutrition || "";

  /* Ø­ÙØ¸ */
  const btn = document.createElement("button");
  btn.textContent = "Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª";
  btn.onclick = async () => {
    await updateDoc(doc(db, "dishes", id), {
      name: name.value,
      price: Number(price.value),
      image: imageInput.value,
      video: video.value,
      ingredients: ing.value,
      nutrition: nut.value
    });
    alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ”");
  };

  card.append(
    img,
    imageInput,
    name,
    price,
    video,
    ing,
    nut,
    btn
  );

  panel.appendChild(card);
});
</script>

</body>
</html>
