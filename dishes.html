<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚</title>

<style>
body{
  font-family:tahoma;
  background:#f3f3f3;
  margin:0;
  padding:15px
}

/* Ø²Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
.top-btn{
  background:#8b0000;
  color:#fff;
  border:none;
  padding:10px;
  width:100%;
  border-radius:8px;
  margin-bottom:15px;
  font-size:16px;
  cursor:pointer
}

/* Ø§Ù„Ø´Ø¨ÙƒØ© */
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:15px
}

.item{
  background:#fff;
  border-radius:12px;
  padding:12px;
  text-align:center;
  box-shadow:0 2px 6px rgba(0,0,0,.15)
}

.item img{
  width:90px;
  height:90px;
  border-radius:50%;
  border:3px solid #8b0000;
  cursor:pointer
}

h3{margin:8px 0 4px;font-size:16px}
p{margin:0;font-size:14px;color:#444}

.add-btn{
  margin-top:6px;
  padding:6px;
  width:100%;
  background:#8b0000;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer
}

/* ===== Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ ===== */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  justify-content:center;
  align-items:center;
  z-index:999
}

.modal-content{
  background:#fff;
  width:90%;
  max-width:500px;
  border-radius:10px;
  padding:15px;
  position:relative
}

.modal video{
  width:100%;
  border-radius:10px
}

.close{
  position:absolute;
  top:10px;
  left:10px;
  font-size:22px;
  cursor:pointer;
  color:#8b0000
}

.info{
  margin-top:10px;
  font-size:14px
}
</style>
</head>
<body>

<button class="top-btn" onclick="location.href='orders.html'">
ğŸ§¾ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
</button>

<div class="grid" id="dishesGrid"></div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">âœ–</span>
    <video id="videoPlayer" controls></video>
    <div class="info">
      <p><strong>Ø§Ù„Ø·Ø¨Ù‚:</strong> <span id="dishName"></span></p>
      <p><strong>Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:</strong> <span id="ingredients"></span></p>
      <p><strong>Ø§Ù„ÙÙˆØ§Ø¦Ø¯:</strong> <span id="nutrition"></span></p>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”´ Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Firebase */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "restaurant-e323a.firebaseapp.com",
  projectId: "restaurant-e323a",
  storageBucket: "restaurant-e323a.appspot.com",
  messagingSenderId: "309092455734",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ */
async function loadDishes(){
  const querySnapshot = await getDocs(collection(db,"dishes"));
  const grid = document.getElementById("dishesGrid");
  grid.innerHTML = "";

  querySnapshot.forEach(docSnap=>{
    const d = docSnap.data();

    grid.innerHTML += `
      <div class="item">
        <img src="${d.image}"
          onclick="openModal(
            '${d.video}',
            '${d.name}',
            '${d.ingredients}',
            '${d.nutrition}'
          )">
        <h3>${d.name}</h3>
        <p>${d.price} Ø¯Ø¬</p>
        <button class="add-btn"
          onclick="addToCart('${d.name}', ${d.price})">
          Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ù„Ø¨
        </button>
      </div>
    `;
  });
}

/* Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
window.addToCart = function(name, price){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push({name, price});
  localStorage.setItem("cart", JSON.stringify(cart));
  alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨ âœ”");
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ */
window.openModal = function(video,name,ingredients,nutrition){
  document.getElementById("dishName").textContent = name;
  document.getElementById("ingredients").textContent = ingredients;
  document.getElementById("nutrition").textContent = nutrition;

  const videoPlayer = document.getElementById("videoPlayer");
  videoPlayer.src = video;
  videoPlayer.play();

  document.getElementById("modal").style.display = "flex";
}

window.closeModal = function(){
  const video = document.getElementById("videoPlayer");
  video.pause();
  video.src = "";
  document.getElementById("modal").style.display = "none";
}

loadDishes();
</script>

</body>
</html>
